package teetime;

public class CoursePreferences {
	public static final int NONE = 0;
	public static final int FAIRWAYS = 0x01;
	public static final int MEADOWS = 0x02;
	public static final int HIGHLANDS = 0x04;	
	public static final int ANY = FAIRWAYS | MEADOWS | HIGHLANDS ;	
	public static final int ALL = ANY;
	
	private int _prefs ;
	
	public CoursePreferences( int prefs ) {
		_prefs = prefs;
	}

	/**
	 * 
	 * @param course1 - the name of the first course, or Any if all courses are in play
	 * @param course2 - the name of the second preferred course, or None if only one course is preferred
	 * @param course3 - the name of the third preferred course, or None if only two courses are preferred
	 */
	public CoursePreferences( String course1, String course2, String course3 ) {
		_prefs = NONE;
		
		if ( course1.equalsIgnoreCase("any")) {
			_prefs = ANY;
		} else {
			_prefs = findCourseByName( course1 );
			if (!course2.equalsIgnoreCase("none") && isValidCourseName( course2 )) {
				_prefs = _prefs | findCourseByName( course2 );
				
				if (!course3.equalsIgnoreCase("none") && isValidCourseName( course3 )) {
					_prefs = _prefs | findCourseByName( course3 );
				}
			}
		}
	}
	
	public boolean meadows() {
		return (_prefs & MEADOWS) != 0;
	}
	
	public boolean fairways() {
		return (_prefs & FAIRWAYS) != 0;
	}
	
	public boolean highlands() {
		return (_prefs & HIGHLANDS) != 0;
	}
	
	public boolean isCoursePreferred(int course) {
		return ((course & _prefs) != 0) ? true : false;
	}
	
	public static int findCourseByName( String course ) {
		if (course.equalsIgnoreCase("meadows")) return MEADOWS;
		if (course.equalsIgnoreCase("highlands")) return HIGHLANDS;
		if (course.equalsIgnoreCase("fairways")) return FAIRWAYS;
		System.err.println( "CoursePreferences.findCourseByName: error, invalid course " + course + " found!");
		return -1;
	}
	
	public boolean isValidCourseName( String course ) {
		return findCourseByName( course ) >= 0;
	}
	
	public String toString() {
		return toString( _prefs );
	}
	
	public static String toString( int course ) {
		String str = "";
		
		switch( course ) {
		case NONE: 
			str = "None";
			break;
	
		case FAIRWAYS: 
			str = "Fairways";
			break;
	
		case MEADOWS: 
			str = "Meadows";
			break;
	
		case HIGHLANDS: 
			str = "Highlands";
			break;
	
		case FAIRWAYS | MEADOWS: 
			str = "Fairways, Meadows";
			break;
	
		case FAIRWAYS | HIGHLANDS: 
			str = "Fairways, Highlands";
			break;
	
		case MEADOWS | HIGHLANDS: 
			str = "Meadows, Highlands";
			break;
		
		case ANY: 
			str = "Fairways, Meadows, Highlands";
			break;
	
		default: 
			str = "Unknown";
		}
		return str;
	}
}
